---
// Works section
import { getCollection } from "astro:content";

const projects = await getCollection("projects");
---

<section class="works" id="works">
    <h2 class="section-title">WORKS</h2>

    <div class="work-items">
        {
            projects.map((project, index) => (
                <>
                    <a
                        href={`/portfolio/projects/${project.slug}`}
                        class="work-item"
                    >
                        <div class="work-header">
                            <div>
                                <h3 class="work-title">{project.data.title}</h3>
                                <p class="work-subtitle">
                                    {project.data.label}
                                </p>
                            </div>
                            <svg
                                class="arrow-icon"
                                width="40"
                                height="40"
                                viewBox="0 0 40 40"
                                fill="none"
                                xmlns="http://www.w3.org/2000/svg"
                            >
                                <path
                                    d="M10 30L30 10M30 10H10M30 10V30"
                                    stroke="black"
                                    stroke-width="2"
                                />
                            </svg>
                        </div>
                        <div class="work-image">
                            <img
                                src={project.data.image || "/placeholder.svg"}
                                alt={project.data.title}
                            />
                        </div>
                    </a>

                    {/* Add divider between items except after last one */}
                    {index < projects.length - 1 && <div class="divider" />}
                </>
            ))
        }
    </div>
</section>

<style>
    .works {
        background: #fff;
        color: #000;
        padding: 60px 20px;
    }

    .section-title {
        font-family: "Space Grotesk", sans-serif;
        font-size: 72px;
        font-weight: 700;
        margin: 0 auto 60px auto;
        letter-spacing: 1px;
        text-align: center;
        /* Added explicit width and center alignment */
        width: 100%;
        display: block;
    }

    /* Updated layout to be mobile-first vertical stack */
    .work-items {
        display: flex;
        flex-direction: column;
        gap: 60px;
        max-width: 1400px;
        margin: 0 auto;
    }

    /* Hide dividers on mobile */
    .divider {
        display: none;
    }

    .work-item {
        display: flex;
        flex-direction: column;
        gap: 20px;
        text-decoration: none;
        color: inherit;
        cursor: pointer;
        transition: transform 0.3s ease;
        /* Added border bottom for mobile */
        border-bottom: 2px solid #000;
        padding-bottom: 40px;
    }

    .work-item:hover {
        transform: translateY(-4px);
    }

    .work-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
    }

    .work-title {
        font-family: "Space Grotesk", sans-serif;
        font-size: 32px;
        font-weight: 700;
        margin: 0 0 8px 0;
        color: #000;
    }

    .work-subtitle {
        font-family: "Space Grotesk", sans-serif;
        font-size: 18px;
        font-style: italic;
        margin: 0;
        color: #000;
    }

    .arrow-icon {
        flex-shrink: 0;
        transition: transform 0.3s ease;
    }

    .work-item:hover .arrow-icon {
        transform: translate(4px, -4px);
    }

    .work-image {
        width: 100%;
        height: auto;
        overflow: hidden;
        border-radius: 8px;
        border: 2px solid #000;
    }

    .work-image img {
        width: 100%;
        height: auto;
        display: block;
        transition: transform 0.3s ease;
    }

    .work-item:hover .work-image img {
        transform: scale(1.02);
    }

    /* Desktop layout: horizontal with dividers */
    @media (min-width: 768px) {
        .section-title {
            font-size: 120px;
            /* Added margin auto for horizontal centering */
            margin: 0 auto 80px auto;
            text-align: center;
            width: 100%;
        }

        .work-items {
            flex-direction: row;
            gap: 40px;
            align-items: flex-start;
        }

        .work-item {
            flex: 1;
            border-bottom: 2px solid #000;
            padding-bottom: 20px;
        }

        /* Show vertical dividers on desktop */
        .divider {
            display: block;
            width: 2px;
            background: #000;
            align-self: stretch;
        }
    }
</style>
